<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="fr">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Aide Plugin Importer2OSMbasemap</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap-theme.min.css">

    <style>
        h1 {
            padding-bottom: 9px;
            border-bottom: 1px solid #eee;
        }

        h4 {
            margin-top: 30px;
        }

        img {
            max-width: 100%;
        }

        #navbar {
            height: 75px;
        }

        .navbar-brand {
            margin-top: 15px;
        }

        ul.nav li a {
            text-align: center;
        }
    </style>

</head>
<body style="padding-top: 75px;position: relative;">
    <div class="container">
        <nav id="navbar" class="navbar navbar-default navbar-fixed-top">
            <div class="container">
                <div class="navbar-header">
                    <a class="navbar-brand" href="#">Aide Plugin Importer2OSMbasemap</a>
                </div>

                <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav">
                        <li>
                            <a href="#create">
                                <img src="images/create.png" />
                                <br />
                                Créer un projet
                            </a>
                        </li>
                        <li>
                            <a href="#import">
                                <img src="images/import.png" />
                                <br />
                                Importer
                            </a>
                        </li>
                        <li>
                            <a href="#import-manager">
                                <img src="images/importmanager.png" />
                                <br />
                                Gestionnaire d'imports
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <h1 id="create"><img src="images/create.png" /> Créer un nouveau projet QGIS</h1>

        <p>
            Cet outil permet de créer un projet QGIS. Cliquer sur l'icône pour ouvrir la boite de dialogue.
        </p>

        <p>
            <img src="images/create1.png" />
        </p>

        <p>
            Saisir les paramètres du nouveau projet selon les indications suivantes :
            <dl class="dl-horizontal">
                <dt>Nom du projet</dt>
                <dd>Le nom du projet, le nom du répertoire qui va contenir les fichiers du projet</dd>
                <dt>Répertoire</dt>
                <dd>Le répertoire qui va contenir le projet</dd>
            </dl>
        </p>

        <div class="alert alert-info" role="alert">
            <b>Note : </b>La création d'un projet peut prendre plusieurs secondes.
        </div>

        <p>
            L'ouverture d'un projet QGIS se fait via l'outil classique de QGIS : <img src="images/create2.png" />. Ouvrir le fichier <i><b>project.qgs</b></i> du répertoire de projet.
        </p>

        <p>
            <img src="images/create3.png" />
        </p>

        <p>
            Une fois le projet créé, l'interface s'affiche avec le fond de carte OpenStreetMap. Des couches de données peuvent alors être ajoutées, en vue d'importer plusieurs entités dans une même couche.
        </p>

        <p>
            <img src="images/create4.png" />
        </p>

        <div class="alert alert-warning" role="alert">
            <b>Attention : </b>Il faut obligatoirement créer ou ouvrir un projet QGIS pour accéder aux autres outils du plugin
        </div>

        <h1 id="import"><img src="images/import.png" /> Importer des données</h1>

        <p>
            Cet outil permet d'importer des données depuis un fichier <a href="#import-shp">SHP</a>, <a href="#import-shp">GeoJSON</a>, ou <a href="#import-dxf">DXF</a>. Cliquez sur l'outil pour ouvrir la fenêtre de sélection du fichier à importer.
        </p>
        <p>
            Si les systèmes de coordonnées ne sont pas les mêmes, une reprojection est automatiquement appliquée.
        </p>

        <p>
            <img src="images/import1.png" />
        </p>

        <br>
        <p>
            La suite l'import dépend du type de fichier à importer :
        </p>

        <h4 id="import-shp">Import d'un fichier SHP (Shapefile ESRI) ou GeoJSON</h4>

        <p>
            L'import du fichier SHP, ou GeoJSON, nécessite une configuration préalable, appelée mapping. Après sélection d'un fichier SHP ou GeoJSON, la fenêtre de configuration s'ouvre.
        </p>

        <p>
            <img src="images/import4.png" />
        </p>

        <p>
            Dans la première liste déroulante, sélectionnez la couche QGIS dans laquelle importer le fichier SHP ou GeoJSON.
        </p>

        <p>
            <img src="images/import5.png" />
        </p>

        <p>
            La seconde étape consiste soit à assigner un attribut QGIS à chaque attribut, soit assigner directement une valeur constante.
            Lors de l'importation, le contenu de l'attribut SHP ou GeoJSON, ou la constante seront alors copiés dans l'attribut QGIS correspondant.
            Une fois la couche QGIS sélectionnée, la liste des attributs de cette couche (attributs QGIS) est disponible dans les différentes boites déroulantes.
            Si le nom de l'attribut QGIS est le même que le nom de l'attribut SHP ou GeoJSON, le plugin le proposera par défaut.
            Vous pouvez choisir l'attribut QGIS qui correspond à l'attribut SHP ou GeoJSON source.
            Il est possible de désactiver un mapping si vous ne souhaitez pas importer un attribut SHP ou GeoJSON.
        </p>

        <p>
            <img src="images/import6.png" />
        </p>
        
        <div class="alert alert-warning" role="alert">
            <b>Note : </b>Si un attribut SHP ou GeoJSON et une valeur sont définis pour un même attribut QGIS, l'import utilisera l'attribut SHP ou GeoJSON.
        </div>
        
        <p>
            La troisième étape est optionnelle (et expérimentale !) et concerne les attributs QGIS rattachés à une liste de valeur.
            En cliquant sur la ligne de l'attribut en question, il est possible de définir un mapping de valeurs.
            Ce mapping de valeur permet d'associer directement les valeurs SHP ou GeoJSON aux bonnes valeurs QGIS.
            <br />
            Cliquez sur importer.
        </p>

        <p>
            <img src="images/import13.png" />
        </p>

        <p>
            Un message indique la fin de l'import, et la carte zoom sur les entités importées.
        </p>

        <p>
            <img src="images/import7.png" />
        </p>

        <div class="alert alert-info" role="alert">
            <b>Note : </b>Il est possible de sauvegarder et de charger une configuration de mapping via les boutons éponymes.
        </div>

        <h4 id="import-dxf">Import d'un fichier DXF (AutoCAD)</h4>

        <p>
            Comme l'import SHP / GeoJSON, l'import du fichier DXF nécessite une configuration préalable, légèrement plus complexe, appelée mapping.
            En effet, contrairement à un fichier SHP / GeoJSON, un calque DXF peut contenir plusieurs types de géométries.
            Après sélection d'un fichier DXF, la fenêtre de configuration s'ouvre.
        </p>

        <p>
            <img src="images/import8.png" />
        </p>

        <p>
            La première étape consiste, pour chaque calque DXF, à indiquer dans quelle couche QGIS ils doivent être copiés.
            Il est possible de désactiver un import de calque en le décochant.
        </p>

        <p>
            <img src="images/import9.png" />
        </p>

        <div class="alert alert-warning" role="alert">
            <b>Attention : </b>L'import ne copiera que les entités DXF dont la géométrie correspond à la couche QGIS de destination.
            Les polylignes fermées DXF seront considérées comme des polygones dans QGIS.
        </div>

        <p>
            La seconde étape consiste, pour chaque mapping calque DXF -> couche QGIS, à sélectionner les constantes à insérer dans les attributs QGIS.
            Pour cela il faut cliquer sur le mapping à configurer dans le cadre du haut, puis saisir les valeurs dans le cadre du bas.
        </p>

        <p>
            <img src="images/import10.png" />
        </p>

        <p>
            Une fois configuré, cliquez sur importer.
        </p>

        <p>
            <img src="images/import11.png" />
        </p>

        <p>
            Si le système de coordonnées du fichier DXF est inconnu, le message suivant apparaît.
        </p>

        <p>
            <img src="images/import11a.png" />
        </p>

            Il est alors possible de sélectionner un système de coordonnées, afin que les données DXF soient correctement géolocalisées dans la couche dans laquelle importer.
        </p>

        <p>
            <img src="images/import11b.png" />
        </p>

        <p>
            Un message indique la fin de l'import ; et la carte zoome sur les entités importées.
        </p>

        <p>
            <img src="images/import12.png" />
        </p>

        <div class="alert alert-info" role="alert">
            <b>Note : </b>Il est possible de sauvegarder et de charger une configuration de mapping via les boutons éponymes.
        </div>

        <h1 id="import-manager"><img src="images/importmanager.png" /> Gestionnaire d'import</h1>
        
        <p>
            Cet outil permet d'annuler un import en cas d'erreur par exemple. Cliquer sur l'outil pour ouvrir la fenêtre.
        </p>
        
        <p>
            <img src="images/importmanager1.png" />
        </p>
        
        <p>
            Un tableau liste les imports effectués, on y trouve l'identifiant de l'import, la date, le nom du fichier importé et les couches importées.
            <br/>
            Cliquer sur annuler l'import pour supprimer tous les objets rattachés à cet import sur toutes les couches.
        </p>
        
        <p>
            Un message indique la fin de la suppression.
        </p>

		
        <script src="js/jquery-1.11.3.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script type="text/javascript">
            var offsetHeight = 75;

            $('body').scrollspy({
                offset: offsetHeight
            });

            $('a').click(function (event) {
                var scrollPos = $('body > .container').find($(this).attr('href')).offset().top - offsetHeight;
                $('body,html').animate({
                    scrollTop: scrollPos
                }, 500, function () {
                    $(".btn-navbar").click();
                });
                return false;
            });
        </script>
    </div>
</body>
</html>
